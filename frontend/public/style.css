/* ================================================= */
/* 1. Definições de Variáveis e Temas */
/* ================================================= */

/* INÍCIO: Tema Escuro NOVO (Dark Mode) - Preto com Neon Dourado */
:root {
    --color-background: #0D0D0D;       /* Fundo preto */
    --color-primary: #FFD700;          /* Dourado Neon (principal) */
    --color-secondary: #FF8C00;        /* Laranja/Cobre Neon (secundário) */
    --color-match: #00FF00;            /* Verde Neon (acerto) */
    --color-mismatch: #FF0000;         /* Vermelho Neon (erro) */
    --color-text: #F0F0F0;             /* Texto claro */
    --color-shadow: 0 0 10px;          /* Sombra neon padrão */
    --color-card-back: var(--color-secondary);
    --color-card-back-text: var(--color-background); /* Texto escuro na carta */
    --color-pokedex-bg: rgba(0, 0, 0, 0.7); /* Opacidade para ver o vídeo */
    --color-header-bg: rgba(13, 13, 13, 0.95);

    /* CORES LOGO PRINCIPAL */
    --logo-ball-top: #CC0000;
    --logo-ball-bottom: #FFFFFF;

    /* CORES MASTER BALL (Ícone do Dark Mode) */
    --master-main-color: #202020;       /* Preto/Cinza Escuro */
    --master-secondary-color: #FFD700;  /* Dourado Neon (detalhe) */
    --master-center-ring: #B3F58C;      /* Verde Claro (círculo central) */
    
    /* CORES POKEBALL (Ícone do Light Mode) */
    --pokeball-top-color: #E60000;      /* Vermelho */
    --pokeball-bottom-color: #F9F9F9;   /* Branco */
    --pokeball-center-ring: #333333;    /* Preto */
}

/* Tema Claro NOVO (Light Mode) - Azul Bebê, Amarelo e Verde Turquesa */
body.light-mode {
    --color-background: #F0F8FF;        /* Azul Bebê Claro */
    --color-primary: #87CEEB;           /* Azul Claro/Céu */
    --color-secondary: #40E0D0;         /* Verde Turquesa */
    --color-match: #FFEB3B;             /* Amarelo Vibrante (acerto) */
    --color-mismatch: #e63946;          /* Vermelho (erro) */
    --color-text: #333333;              /* Texto escuro */
    --color-shadow: 0 0 5px;            
    --color-card-back: var(--color-primary); 
    --color-card-back-text: #FFFFFF;
    --color-pokedex-bg: rgba(255, 255, 255, 0.9);
    --color-header-bg: rgba(240, 248, 255, 0.95);

    /* CORES LOGO PRINCIPAL */
    --logo-ball-top: #E60000;
    --logo-ball-bottom: #F9F9F9;

    /* CORES POKEBALL (Ícone do Light Mode) */
    --pokeball-top-color: #E60000;
    --pokeball-bottom-color: #F9F9F9;
    --pokeball-center-ring: #333333;
}


/* --- Fundo de Vídeo (Pixel Art) --- */
#background-video {
    position: fixed;
    top: 0;
    left: 0;
    min-width: 100vw;
    min-height: 100vh;
    width: auto;
    height: auto;
    z-index: -1;
    object-fit: cover;
    filter: brightness(0.6) grayscale(0.2); 
    transition: filter 0.3s;
}

body.light-mode #background-video {
    filter: brightness(0.8) grayscale(0.1); 
}

/* ================================================= */
/* 2. Estilos Globais e Layout Base */
/* ================================================= */

* {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
}

body {
    background: var(--color-background);
    width: 100vw;
    min-height: 100vh;
    overflow-x: hidden;
    font-family: 'Consolas', 'Courier New', monospace;
    color: var(--color-text);
    display: flex;
    justify-content: center;
    padding-top: 100px; 
    padding-bottom: 50px;
    transition: background 0.3s; 
}

.hidden {
    display: none !important;
}


/* ================================================= */
/* 3. Estilos do Cabeçalho (Header Fixo) */
/* ================================================= */

#main-header {
    position: fixed; 
    top: 0;
    left: 0;
    width: 100%;
    height: 80px; 
    background: var(--color-header-bg);
    border-bottom: 2px solid var(--color-primary);
    box-shadow: 0 0 15px var(--color-primary);
    backdrop-filter: blur(5px); 
    z-index: 100; 
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 0 20px;
}

.logo-area {
    display: flex;
    align-items: center;
    gap: 15px;
}

#main-header h1 {
    font-size: 1.8em;
    color: var(--color-primary);
    text-shadow: var(--color-shadow) var(--color-primary);
    margin: 0; 
    transition: color 0.3s, text-shadow 0.3s;
}

.user-controls {
    display: flex;
    align-items: center;
    gap: 15px;
}

/* Ícone de Logo Principal (Pokebola) */
.pokeball-icon {
    width: 40px;
    height: 40px;
    background: var(--logo-ball-bottom);
    border-radius: 50%;
    position: relative;
    overflow: hidden;
    border: 3px solid var(--color-text);
    box-shadow: var(--color-shadow) var(--logo-ball-top);
    animation: rotate-pokeball 8s linear infinite; 
}
.pokeball-icon::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 50%;
    background: var(--logo-ball-top);
}
.pokeball-icon::after {
    content: '';
    position: absolute;
    top: 50%;
    left: 0;
    width: 100%;
    height: 4px;
    background: var(--color-text);
    transform: translateY(-50%);
    box-shadow: 0 0 5px var(--color-text);
}
@keyframes rotate-pokeball {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
}

/* --- Estilos do Toggle de Tema (Pokéballs) --- */
#theme-toggle {
    position: relative; 
    background: none;
    border: none;
    padding: 0; 
    width: 36px; 
    height: 36px;
    cursor: pointer;
    box-shadow: none;
}
#theme-toggle:hover:not(:disabled) {
    background: none;
    box-shadow: none;
}

.pokeball-icon-toggle {
    position: absolute; 
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 32px;
    height: 32px;
    border-radius: 50%;
    overflow: hidden;
    border: 2px solid var(--color-text);
    box-shadow: 0 0 5px var(--color-primary); 
    transition: all 0.3s;
}
.pokeball-icon-toggle:hover {
    transform: translate(-50%, -50%) scale(1.1);
}

/* ESTILO POKEBALL (Modo Claro) */
.pokeball-style {
    background: var(--pokeball-bottom-color); 
    border-color: var(--pokeball-center-ring); 
}
.pokeball-style::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 50%;
    background: var(--pokeball-top-color); 
    border-bottom: 3px solid var(--pokeball-center-ring); 
    z-index: 1;
}
.pokeball-style::after {
    content: ''; 
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 10px;
    height: 10px;
    border-radius: 50%;
    background: var(--pokeball-center-ring); 
    border: 3px solid var(--pokeball-bottom-color); 
    z-index: 3;
    box-shadow: 0 0 5px var(--pokeball-center-ring);
}


/* ESTILO MASTER BALL (Modo Escuro) */
.masterball-style {
    background: var(--master-main-color); 
    border-color: var(--master-main-color); 
}
.masterball-style::before {
    content: ''; 
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 8px;
    height: 8px;
    border-radius: 50%;
    background: var(--master-center-ring); 
    border: 2px solid var(--master-secondary-color); 
    z-index: 3;
    box-shadow: 0 0 5px var(--master-center-ring);
}
.masterball-style::after {
    content: '';
    position: absolute;
    top: 50%;
    left: 0;
    width: 100%;
    height: 5px; 
    background: var(--master-secondary-color); 
    transform: translateY(-50%);
    box-shadow: 0 0 5px var(--master-secondary-color);
    z-index: 2;
}
.masterball-style .master-detail-left,
.masterball-style .master-detail-right {
    position: absolute;
    top: 50%;
    width: 40%; 
    height: 4px; 
    background: var(--master-secondary-color); 
    transform-origin: center center;
    box-shadow: 0 0 3px var(--master-secondary-color);
    z-index: 4;
}
.masterball-style .master-detail-left {
    left: -20%; 
    transform: translateY(-50%) rotate(45deg); 
}
.masterball-style .master-detail-right {
    right: -20%; 
    transform: translateY(-50%) rotate(-45deg); 
}


/* ================================================= */
/* 5. Estilos da Área Principal (Pokedex) */
/* ================================================= */

#pokedex {
    /* Largura padrão para o menu */
    max-width: 90%; 
    width: 800px;
    min-height: 400px;
    background: var(--color-pokedex-bg); 
    border: 2px solid var(--color-primary);
    box-shadow: var(--color-shadow) var(--color-secondary);
    border-radius: 15px;
    padding: 20px; 
    text-align: center;
    /* Adiciona a transição suave */
    transition: all 0.5s ease-in-out; 
}

/* NOVO: Estilo para expandir a Pokedex quando o jogo estiver ativo */
#pokedex.expanded-game {
    /* Aumenta a largura máxima para preencher mais a tela */
    max-width: 95%; 
    width: 1200px; 
    padding: 30px; 
    min-height: 90vh; 
    /* Permite que os filhos (painel e tabuleiro) se ajustem verticalmente */
    display: flex;
    flex-direction: column;
}


h2 {
    font-size: 1.5em;
    color: var(--color-secondary);
    margin-bottom: 20px;
}

/* Estilos de Botões Padrão */
button {
    background: var(--color-secondary);
    color: var(--color-text);
    border: none;
    padding: 10px 20px;
    border-radius: 5px;
    cursor: pointer;
    font-weight: bold;
    text-transform: uppercase;
    box-shadow: var(--color-shadow) var(--color-secondary);
    transition: all 0.2s ease-in-out;
}

button:hover:not(:disabled) {
    background: var(--color-secondary); 
    box-shadow: 0 0 15px var(--color-primary); 
}
body.light-mode button:hover:not(:disabled) {
    background: var(--color-secondary); 
    box-shadow: 0 0 10px rgba(0,0,0,0.3);
}

button:disabled {
    cursor: not-allowed;
    opacity: 0.5;
    box-shadow: none;
}

.options-container {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    gap: 15px;
    margin-bottom: 30px;
}
.options-container button {
    flex: 1 1 40%;
    max-width: 300px;
}

.back-button, #btn-error-return, #btn-win-return {
    margin-top: 20px;
    background: none;
    border: 1px solid var(--color-text);
    color: var(--color-text);
    box-shadow: none;
}

.back-button:hover, #btn-error-return:hover, #btn-win-return:hover {
    background: rgba(255, 255, 255, 0.1);
    box-shadow: 0 0 5px var(--color-text);
}

/* Painel de Movimentos */
#panel {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 20px;
    padding: 10px;
    background: rgba(255, 215, 0, 0.1); 
    border: 1px solid var(--color-primary);
    border-radius: 5px;
    /* Adicionado para que o painel não cresça, deixando espaço para o tabuleiro */
    flex-shrink: 0;
}
#moves {
    color: var(--color-primary);
    font-weight: bold;
    font-size: 1.2em;
}

/* ================================================= */
/* 6. Estilos do Tabuleiro (Game Board) */
/* ================================================= */

#board {
    /* NOVO: Usar 8 colunas para melhor encaixe de 16 cartas em tela larga (8x2) */
    grid-template-columns: repeat(8, 1fr); 
    gap: 10px;
    perspective: 1000px; 
    /* NOVO: Permite que o tabuleiro ocupe o espaço restante */
    flex-grow: 1; 
    /* NOVO: Limita o tamanho inicial para evitar overflow antes do ajuste do grid */
    min-height: 0;
    max-width: 100%;
    /* Centraliza o grid dentro do contêiner flexível */
    align-self: center; 
    display: grid; /* Mantido para grid layout */
}

.card {
    background: none;
    /* REMOVIDO: altura fixa (100px), agora será determinada pelo grid e aspect-ratio */
    /* width: 100%; - Mantido */
    position: relative;
    cursor: pointer;
    transform-style: preserve-3d;
    transition: transform 0.6s;
    border-radius: 8px;
    border: 2px solid var(--color-primary);
    box-shadow: var(--color-shadow) var(--color-secondary);
    /* NOVO: Garante que as cartas sejam sempre quadradas, independente do tamanho */
    aspect-ratio: 1; 
}

.card-inner {
    position: absolute;
    width: 100%;
    height: 100%;
    text-align: center;
    transition: transform 0.6s;
    transform-style: preserve-3d;
}

.card.flipped .card-inner {
    transform: rotateY(180deg);
}

.card-front, .card-back {
    position: absolute;
    width: 100%;
    height: 100%;
    backface-visibility: hidden;
    display: flex;
    justify-content: center;
    align-items: center;
    border-radius: 6px;
    font-size: 2em;
}

.card-front {
    background: var(--color-background);
    transform: rotateY(180deg);
}
.card-front img {
    max-width: 90%;
    max-height: 90%;
    object-fit: contain;
    border-radius: 6px;
    filter: drop-shadow(0 0 5px var(--color-match));
}

.card-back {
    background: var(--color-card-back); 
    color: var(--color-card-back-text); 
    border: 1px solid var(--color-secondary);
}
.pokemon-logo {
    font-size: 2.5em; 
    color: var(--color-primary);
    text-shadow: var(--color-shadow) var(--color-primary);
}

/* Feedback de Acerto */
.card.matched {
    cursor: default;
    border-color: var(--color-match);
    animation: match-pulse 0.5s ease-out 1;
    box-shadow: 0 0 15px var(--color-match);
}
.card.matched .card-back {
    display: none; 
}

/* Feedback de Erro */
.card.mismatch {
    border-color: red;
    box-shadow: 0 0 15px red;
    animation: mismatch-shake 0.4s ease-in-out;
}

/* Definição das animações */
@keyframes match-pulse {
    0% { transform: scale(1); box-shadow: 0 0 5px var(--color-match); }
    50% { transform: scale(1.05); box-shadow: 0 0 25px var(--color-match); }
    100% { transform: scale(1); box-shadow: 0 0 15px var(--color-match); }
}

@keyframes mismatch-shake {
    0%, 100% { transform: translateX(0); }
    20%, 60% { transform: translateX(-5px); }
    40%, 80% { transform: translateX(5px); }
}

/* ================================================= */
/* 7. Estilos da Criação Personalizada */
/* ... (sem alterações) ... */

/* ================================================= */
/* 8. Estilos de Feedback (Loading/Erro/Vitória) */
/* ... (sem alterações) ... */


/* ================================================= */
/* 9. Media Queries (Responsividade) */
/* ================================================= */

/* NOVO: Ajuste para telas grandes (expansão) */
@media (min-width: 1201px) {
    #pokedex.expanded-game {
        width: 1200px;
    }
}

/* NOVO: Ajuste para telas médias (expansão) */
@media (max-width: 1200px) {
    #pokedex.expanded-game {
        width: 95%; 
        max-width: none;
    }
}

@media (max-width: 768px) {
    body {
        padding-top: 70px;
    }
    #main-header {
        height: 60px;
        padding: 0 10px;
    }
    #main-header h1 {
        font-size: 1.4em;
    }
    .pokeball-icon {
        width: 30px;
        height: 30px;
    }
    
    #board {
        /* MANTIDO: 4 colunas para telas médias */
        grid-template-columns: repeat(4, 1fr); 
    }
    .pokemon-input-group {
        flex-direction: column;
    }
    .pokemon-input-group input {
        width: 100%;
    }
    #theme-toggle {
        width: 32px; 
        height: 32px;
    }
    .pokeball-icon-toggle {
        width: 28px;
        height: 28px;
    }
    /* Ajuste do #pokedex para telas pequenas, mesmo na expansão */
    #pokedex {
        min-height: auto;
    }
    #pokedex.expanded-game {
        min-height: auto;
    }
}

@media (max-width: 480px) {
    #board {
        /* MANTIDO: 3 colunas para telas pequenas */
        grid-template-columns: repeat(3, 1fr); 
        gap: 8px;
    }
    .card {
        /* REMOVIDO: altura fixa, o aspect-ratio cuida disso */
    }
    .options-container button {
        flex: 1 1 100%;
    }
    #main-header h1 {
        font-size: 1.2em;
    }
}